{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useEffect, useState } from 'react';\n\ninterface User {\n  email: string;\n  role: string;\n}\n\nexport function Navbar() {\n  const pathname = usePathname();\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    checkAuth();\n  }, [pathname]);\n\n  const checkAuth = async () => {\n    try {\n      const response = await fetch('/api/auth/check');\n      const data = await response.json();\n      \n      if (response.ok && data.user) {\n        setUser(data.user);\n      } else {\n        setUser(null);\n      }\n    } catch (error) {\n      console.error('Auth check error:', error);\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await fetch('/api/auth/logout', { method: 'POST' });\n      window.location.href = '/login';\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n  };\n\n  const isActive = (path: string) => pathname === path;\n\n  return (\n    <nav className=\"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex justify-between h-16\">\n          <div className=\"flex\">\n            <Link \n              href=\"/\" \n              className=\"flex items-center text-xl font-bold text-gray-900\"\n            >\n              PDF Editor\n            </Link>\n          </div>\n\n          <div className=\"flex items-center space-x-4\">\n            {!loading && (\n              <>\n                {user ? (\n                  <>\n                    <Link\n                      href=\"/pdf-editor\"\n                      className={`px-3 py-2 rounded-md text-sm font-medium ${\n                        isActive('/pdf-editor')\n                          ? 'bg-gray-900 text-white'\n                          : 'text-gray-700 hover:bg-gray-100'\n                      }`}\n                    >\n                      Editor\n                    </Link>\n\n                    {user.role === 'admin' && (\n                      <Link\n                        href=\"/admin\"\n                        className={`px-3 py-2 rounded-md text-sm font-medium ${\n                          pathname.startsWith('/admin')\n                            ? 'bg-gray-900 text-white'\n                            : 'text-gray-700 hover:bg-gray-100'\n                        }`}\n                      >\n                        Admin\n                      </Link>\n                    )}\n\n                    <Link\n                      href=\"/subscription\"\n                      className={`px-3 py-2 rounded-md text-sm font-medium ${\n                        pathname.startsWith('/subscription')\n                          ? 'bg-gray-900 text-white'\n                          : 'text-gray-700 hover:bg-gray-100'\n                      }`}\n                    >\n                      Subscription\n                    </Link>\n\n                    <button\n                      onClick={handleLogout}\n                      className=\"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100\"\n                    >\n                      Logout\n                    </button>\n                  </>\n                ) : (\n                  <>\n                    <Link\n                      href=\"/login\"\n                      className={`px-3 py-2 rounded-md text-sm font-medium ${\n                        isActive('/login')\n                          ? 'bg-gray-900 text-white'\n                          : 'text-gray-700 hover:bg-gray-100'\n                      }`}\n                    >\n                      Login\n                    </Link>\n                    <Link\n                      href=\"/register\"\n                      className={`px-3 py-2 rounded-md text-sm font-medium ${\n                        isActive('/register')\n                          ? 'bg-gray-900 text-white'\n                          : 'text-gray-700 hover:bg-gray-100'\n                      }`}\n                    >\n                      Register\n                    </Link>\n                  </>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAWO,SAAS;;IACd,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4BAAE;YACR;QACF;2BAAG;QAAC;KAAS;IAEb,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,SAAS,EAAE,IAAI,KAAK,IAAI,EAAE;gBAC5B,QAAQ,KAAK,IAAI;YACnB,OAAO;gBACL,QAAQ;YACV;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qBAAqB;YACnC,QAAQ;QACV,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,MAAM,oBAAoB;gBAAE,QAAQ;YAAO;YACjD,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC;IACF;IAEA,MAAM,WAAW,CAAC,OAAiB,aAAa;IAEhD,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;kCAKH,6LAAC;wBAAI,WAAU;kCACZ,CAAC,yBACA;sCACG,qBACC;;kDACE,6LAAC,+JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAW,CAAC,yCAAyC,EACnD,SAAS,iBACL,2BACA,mCACJ;kDACH;;;;;;oCAIA,KAAK,IAAI,KAAK,yBACb,6LAAC,+JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAW,CAAC,yCAAyC,EACnD,SAAS,UAAU,CAAC,YAChB,2BACA,mCACJ;kDACH;;;;;;kDAKH,6LAAC,+JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAW,CAAC,yCAAyC,EACnD,SAAS,UAAU,CAAC,mBAChB,2BACA,mCACJ;kDACH;;;;;;kDAID,6LAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;6DAKH;;kDACE,6LAAC,+JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAW,CAAC,yCAAyC,EACnD,SAAS,YACL,2BACA,mCACJ;kDACH;;;;;;kDAGD,6LAAC,+JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAW,CAAC,yCAAyC,EACnD,SAAS,eACL,2BACA,mCACJ;kDACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYrB;GAjIgB;;QACG,qIAAA,CAAA,cAAW;;;KADd","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/contexts/admin-context.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface AdminContextType {\n  isAdmin: boolean;\n  isLoading: boolean;\n  checkAdminStatus: () => Promise<void>;\n}\n\nconst AdminContext = createContext<AdminContextType>({\n  isAdmin: false,\n  isLoading: true,\n  checkAdminStatus: async () => {},\n});\n\nexport function AdminProvider({ children }: { children: React.ReactNode }) {\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n\n  const checkAdminStatus = async () => {\n    try {\n      const response = await fetch('/api/auth/check');\n      const data = await response.json();\n\n      if (response.ok && data.user?.role === 'admin') {\n        setIsAdmin(true);\n      } else {\n        setIsAdmin(false);\n        if (window.location.pathname.startsWith('/admin')) {\n          router.push('/login');\n        }\n      }\n    } catch (error) {\n      console.error('Error checking admin status:', error);\n      setIsAdmin(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    checkAdminStatus();\n  }, []);\n\n  return (\n    <AdminContext.Provider value={{ isAdmin, isLoading, checkAdminStatus }}>\n      {children}\n    </AdminContext.Provider>\n  );\n}\n\nexport function useAdmin() {\n  const context = useContext(AdminContext);\n  if (context === undefined) {\n    throw new Error('useAdmin must be used within an AdminProvider');\n  }\n  return context;\n}\n\nexport function withAdminProtection<P extends object>(\n  WrappedComponent: React.ComponentType<P>\n) {\n  return function AdminProtectedComponent(props: P) {\n    const { isAdmin, isLoading } = useAdmin();\n    const router = useRouter();\n\n    useEffect(() => {\n      if (!isLoading && !isAdmin) {\n        router.push('/login');\n      }\n    }, [isLoading, isAdmin, router]);\n\n    if (isLoading) {\n      return (\n        <div className=\"flex justify-center items-center min-h-screen\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900\"></div>\n        </div>\n      );\n    }\n\n    if (!isAdmin) {\n      return null;\n    }\n\n    return <WrappedComponent {...props} />;\n  };\n}\n"],"names":[],"mappings":";;;;;;AAEA;AACA;;;AAHA;;;AAWA,MAAM,6BAAe,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAoB;IACnD,SAAS;IACT,WAAW;IACX,kBAAkB,WAAa;AACjC;AAEO,SAAS,cAAc,EAAE,QAAQ,EAAiC;;IACvE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,SAAS,EAAE,IAAI,KAAK,IAAI,EAAE,SAAS,SAAS;gBAC9C,WAAW;YACb,OAAO;gBACL,WAAW;gBACX,IAAI,OAAO,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW;oBACjD,OAAO,IAAI,CAAC;gBACd;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,WAAW;QACb,SAAU;YACR,aAAa;QACf;IACF;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR;QACF;kCAAG,EAAE;IAEL,qBACE,6LAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAS;YAAW;QAAiB;kBAClE;;;;;;AAGP;GAnCgB;;QAGC,qIAAA,CAAA,YAAS;;;KAHV;AAqCT,SAAS;;IACd,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB;AAQT,SAAS,oBACd,gBAAwC;;IAExC,UAAO,SAAS,wBAAwB,KAAQ;;QAC9C,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG;QAC/B,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;QAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qEAAE;gBACR,IAAI,CAAC,aAAa,CAAC,SAAS;oBAC1B,OAAO,IAAI,CAAC;gBACd;YACF;oEAAG;YAAC;YAAW;YAAS;SAAO;QAE/B,IAAI,WAAW;YACb,qBACE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;;;;;;;;;;QAGrB;QAEA,IAAI,CAAC,SAAS;YACZ,OAAO;QACT;QAEA,qBAAO,6LAAC;YAAkB,GAAG,KAAK;;;;;;IACpC;;YAtBiC;YAChB,qIAAA,CAAA,YAAS;;;AAsB5B","debugId":null}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { AdminProvider } from \"@/contexts/admin-context\";\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return (\n    <AdminProvider>\n      {children}\n    </AdminProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,qBACE,6LAAC,uIAAA,CAAA,gBAAa;kBACX;;;;;;AAGP;KANgB","debugId":null}}]
}